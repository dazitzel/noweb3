%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: spawnvpe.dvi
%%Pages: 13
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Courier Times-Italic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o spawnvpe.ps spawnvpe.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2000.07.31:1738
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (spawnvpe.dvi)
@start /Fa 135[60 60 2[60 60 2[60 1[60 1[60 2[60 60 2[60
60 60 1[60 50[60 46[{TeXBase1Encoding ReEncodeFont}14
99.6264 /Courier rf /Fb 171[41 6[59 77[{TeXBase1Encoding ReEncodeFont}2
66.4176 /Times-Roman rf /Fc 136[45 45 2[45 2[45 1[45
45 3[45 3[45 3[45 9[45 2[45 3[45 45 45 4[45 7[45 65[{
TeXBase1Encoding ReEncodeFont}16 74.7198 /Courier rf
/Fd 134[40 40 61 40 45 25 35 35 1[45 45 45 66 25 40 1[25
45 45 25 40 45 40 1[45 12[51 45 56 1[56 10[56 3[56 18[23
43[45 2[{TeXBase1Encoding ReEncodeFont}30 90.9091 /Times-Italic
rf /Fe 137[37 37 1[29 25 3[37 2[37 1[21 37 2[33 37 33
37 33 11[54 16[54 9[21 37 37 37 37 37 37 37 37 37 2[19
1[19 2[25 25 37[42 2[{TeXBase1Encoding ReEncodeFont}30
74.7198 /Times-Roman rf /Ff 136[72 72 2[72 72 1[72 72
72 5[72 2[72 1[72 1[72 50[72 46[{TeXBase1Encoding ReEncodeFont}12
119.552 /Courier rf /Fg 134[50 2[50 55 33 39 44 1[55
50 55 83 28 55 1[28 55 2[44 55 44 1[50 13[55 72 1[61
6[39 4[72 72 13[50 50 50 50 50 2[25 43[55 2[{
TeXBase1Encoding ReEncodeFont}31 99.6264 /Times-Bold
rf
%DVIPSBitmapFont: Fh cmsy10 10.95 5
/Fh 5 106 df<EE3FFC0303B512C0031F14F8037F14FE913B01FFC003FF80DA07FCC7EA
3FE0DA1FE0EC07F8DA3F80EC01FC02FEC9127FD901F8EE1F804948707ED907C0EE03E049
48707E49CB7E013E187C49840178181E498400011A804918074848F003C000071AE04918
0148CD12F0A3001E1A78A2481A3CA3481A1EA5481A0FAD00781A1EA56C1A3CA36C1A78A2
6C1AF0A36C6CF001E06D180300031AC06C6CF007806D180F00001A000178181E017C183E
6D606D606D6C4C5A6D6C4C5AD903F0EE0FC06D6C4C5AD900FE047FC7FCDA3F80EC01FCDA
1FE0EC07F8DA07FCEC3FE0913B01FFC003FF806E6CB548C8FC031F14F8030314C0922600
3FFCC9FC50557BC05B>13 D<EB07F8EB1FFE90387FFF8048B512E04880488048804880A2
4880A2481580A2B712C0A86C1580A26C1500A26C5CA26C5C6C5C6C5C6C5C6C6C1380D91F
FEC7FCEB07F822227BA72D>15 D<007FB912E0BA12F0A26C18E0CDFCAE007FB912E0BA12
F0A26C18E0CDFCAE007FB912E0BA12F0A26C18E03C287BAA47>17
D<146014F0A2EB01E0A3EB03C0A3EB0780A2EB0F00A3131EA35BA25BA35BA3485AA3485A
A2485AA348C7FCA3121EA25AA35AA35AA21278A37EA37EA27EA36C7EA36C7EA26C7EA36C
7EA31378A37FA27FA37FA3EB0780A2EB03C0A3EB01E0A3EB00F0A21460145A77C323>
104 D<126012F0A21278A37EA37EA27EA36C7EA36C7EA26C7EA36C7EA31378A37FA27FA3
7FA3EB0780A2EB03C0A3EB01E0A3EB00F0A2EB01E0A3EB03C0A3EB0780A2EB0F00A3131E
A35BA25BA35BA3485AA3485AA2485AA348C7FCA3121EA25AA35AA35AA21260145A7BC323
>I E
%EndDVIPSBitmapFont
/Fi 167[66 2[66 56 51 61 2[66 66 81 56 2[30 66 1[51 56
66 61 1[66 11[45 45 45 45 45 49[{
.167 SlantFont TeXBase1Encoding ReEncodeFont}21 90.9091
/Times-Roman rf /Fj 130[55 1[55 1[55 55 55 55 55 55 55
55 1[55 55 55 55 55 55 1[55 55 55 55 55 55 55 55 55 1[55
1[55 55 55 1[55 55 55 55 55 55 55 55 1[55 55 55 1[55
2[55 55 1[55 55 55 55 1[55 1[55 55 55 55 55 55 6[55 55
55 55 55 55 55 55 55 55 55 55 1[55 55 55 55 55 55 33[{
TeXBase1Encoding ReEncodeFont}72 90.9091 /Courier rf
/Fk 104[91 29[45 45 66 45 45 25 35 30 45 45 45 45 71
25 45 25 25 45 45 30 40 45 40 45 40 30 6[66 66 86 66
66 56 51 61 1[51 66 66 81 56 1[35 30 66 66 51 1[66 61
61 66 1[40 4[25 45 45 45 45 45 45 45 45 45 45 25 23 30
23 2[30 30 30 35[51 51 2[{TeXBase1Encoding ReEncodeFont}70
90.9091 /Times-Roman rf /Fl 105[45 28[45 45 2[51 30 35
40 1[51 45 51 76 25 2[25 51 2[40 51 40 1[45 12[61 5[66
4[35 2[56 4[66 6[30 45 2[45 45 45 45 45 45 2[23 43[51
2[{TeXBase1Encoding ReEncodeFont}33 90.9091 /Times-Bold
rf /Fm 135[60 2[66 40 47 53 2[60 66 100 33 2[33 66 2[53
66 53 1[60 12[80 10[47 5[86 1[86 11[60 60 60 60 60 46[66
2[{TeXBase1Encoding ReEncodeFont}25 119.552 /Times-Bold
rf /Fn 134[50 1[72 1[50 2[33 2[50 1[78 28 50 1[28 50
2[44 1[44 50 44 11[72 9[72 39 4[61 2[66 1[92 5[28 6[50
50 50 50 1[25 1[25 44[{TeXBase1Encoding ReEncodeFont}27
99.6264 /Times-Roman rf /Fo 136[104 72 2[56 2[72 1[72
8[64 3[64 52[36 44[{TeXBase1Encoding ReEncodeFont}8 143.462
/Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 1263 912 44 4 v 1306 912 a Fo(spa)n(wn)-6 b(vpe,)p
1952 912 V 85 w(spw)o(an)g(vp)1371 1165 y Fn(Kai)25 b(Uwe)g(Karl)g
(Baumbach)1241 1281 y(Email:)k(baumbach@kabece.com)1606
1483 y(July)24 b(31,)h(2000)382 1876 y Fm(Contents)382
2083 y Fl(1)91 b(Intr)n(oduction)2315 b(2)518 2195 y
Fk(1.1)96 b(Synopsis)33 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)170 b(2)518 2308 y(1.2)96 b(Description)75
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)170 b(2)727
2421 y(1.2.1)110 b(Function)25 b(parameters)76 b(.)46
b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h
(.)f(.)170 b(3)518 2534 y(1.3)96 b(Return)25 b(v)n(alue)32
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)170 b(3)727
2647 y(1.3.1)110 b(From)23 b(synchronous)p 1726 2647
28 4 v 60 w Fj(spawnvpe\(\))79 b Fk(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)170 b(3)727 2760 y(1.3.2)110 b(From)23
b(asynchronous)p 1766 2760 V 60 w Fj(spawnvpe\(\))39
b Fk(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)170
b(3)382 2964 y Fl(2)91 b(The)23 b(main)f(\002le)h Fj(spawnvpe.c)1724
b Fl(4)382 3168 y(3)91 b(The)23 b(header)g(\002le)g Fj(nwprocess.h)1598
b Fl(6)518 3281 y Fk(3.1)96 b(Prototype)26 b(and)e(macros)45
b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)170 b(7)518 3393 y(3.2)96
b(Constants)72 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)170
b(8)382 3597 y Fl(4)91 b(A)23 b(small)g(test)h(suite)2149
b(9)518 3710 y Fk(4.1)96 b Fj(spawntest.exe)54 b Fk(.)45
b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)170 b(9)518 3823 y(4.2)96
b Fj(spawnchild.exe)67 b Fk(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)125
b(12)382 4027 y Fl(5)91 b(Index)2540 b(13)518 4140 y
Fk(5.1)96 b(Chunks)83 b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)125 b(13)518 4253 y(5.2)96 b(Identi\002ers)62
b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)125
b(13)1854 5652 y(1)p eop
%%Page: 2 2
2 1 bop 382 249 a Fi(1)91 b(INTR)l(ODUCTION)2121 b Fk(2)382
548 y Fm(1)119 b(Intr)n(oduction)382 755 y Fk(Why)30
b(should)j(one)f(w)o(ant)f(a)f Fj(spawn\(\))d Fk(function)34
b(for)d(Unix)g(when)g(a)g Fj(fork\(\))p Fk(/)p Fj(exec\(\))382
868 y Fk(combination)e(is)d(much)h(more)f(\003e)o(xible)h(and)g(po)n
(werful?)39 b(In)26 b(a)g(lar)n(ge)h(amount)h(of)e(cases)h(you)382
981 y(simply)d(w)o(ant)g(to)g(run)g(a)f(dif)n(ferent)j(program)f(from)e
(scratch)j(and)e(you)g(don')n(t)h(w)o(ant)f(to)g(rely)g(on)382
1094 y Fj(system\(\))19 b Fk(which)24 b(may)f(be)h(dangerous)i(and)e
(doesn')n(t)i(pro)o(vide)f(much)f(control.)523 1207 y(If)37
b(you')-5 b(re)39 b(trying)f(to)f(port)h(an)f(application)j(to)d
(systems)i(where)e(processes)j(can')n(t)e(be)382 1319
y(fork)o(ed)27 b(and)e(continue)j(in)d(the)g(midst)h(of)f(e)o(x)o
(ecution)i(\(i.e.)34 b(MS-W)l(indo)n(ws)25 b(or)h(AS/400\))f(your)382
1432 y(program')-5 b(s)33 b(logic)g(is)e(easier)h(to)g(understand)i(if)
d(you)h(can)g(use)g(just)g(one)g(function)i(call)d(and)382
1545 y(k)o(eep)24 b(the)g(rest)g(in)g(a)f(separate)i(library)-6
b(.)523 1658 y(This)24 b(one-function-libra)q(ry)30 b(gi)n(v)o(es)25
b(you)g(a)p 1911 1658 28 4 v 57 w Fj(spawnvpe\(\))19
b Fk(according)27 b(to)d(the)h(Micro-)382 1771 y(soft)544
1768 y(c)517 1771 y Fh(\015)h Fk(speci\002cation)j(b)n(ut)d(k)o(eeping)
i(GCC)23 b(\(DJGPP\))i(in)g(mind.)35 b(It)26 b(doesn')n(t)i(implement)f
(the)382 1884 y(mode)e(\003ag)f Fj(P)p 828 1884 V 32
w(OVERLAY)d Fk(because)26 b(I)e(can')n(t)i(see)f(an)o(y)g(use)g(in)f
(calling)i(spa)o(wn)f(when)g(I)f(really)382 1997 y(mean)g(e)o(x)o(ec.)
382 2246 y Fg(1.1)99 b(Synopsis)382 2420 y Fj(#)54 b(include)d
("nwprocess.h")382 2611 y(int)p 606 2611 V 86 w(spawnvpe)g(\()473
2724 y(int)i(mode,)473 2837 y(const)f(char)h(*filename,)473
2950 y(char)g(*const)e(argv[],)473 3062 y(char)i(*const)e(envp[]\);)382
3253 y(int)p 606 3253 V 86 w(spawnvp)g(\()473 3366 y(int)i(mode,)473
3479 y(const)f(char)h(*filename,)473 3592 y(char)g(*const)e(argv[]\);)
382 3786 y Fl(Note:)p 628 3786 V 62 w Fj(spawnvp\(\))18
b Fk(is)24 b(implemented)h(as)f(a)f(macro.)382 3899 y(Please)33
b(also)g(note)g(that)f(the)h(parameter)h(declaration)h(is)d(tak)o(en)i
(from)e(GCC.)e(Microsoft)3305 3896 y(c)3277 3899 y Fh(\015)382
4012 y Fk(uses)609 4200 y Fj(const)52 b(char)h(*const)f(*argv)382
4387 y Fk(which)24 b(is)f(e)n(v)o(en)g(more)h(weird.)29
b(The)o(y)23 b(both)h(deserv)o(e)h(an)e(a)o(w)o(ard)g(for)h(the)g(most)
f(useless)i(use)f(of)382 4500 y Fj(const)p Fk(.)382 4749
y Fg(1.2)99 b(Description)p 387 4924 V 415 4924 a Fj(spawnvpe)17
b Fk(creates)23 b(and)f(e)o(x)o(ecutes)i(a)d(process.)30
b(It)21 b(searches)j(the)e(P)-8 b(A)e(TH)19 b(for)j(the)g(ne)n(w)f
(pro-)382 5037 y(cess')h(image.)28 b(F)o(or)20 b(details)j(on)e(this,)h
(please)h(ha)n(v)o(e)e(a)g(look)h(at)f(your)h(system')-5
b(s)22 b(documentation)382 5150 y(of)h(the)h Fj(execvp\(\))19
b Fk(function.)p eop
%%Page: 3 3
3 2 bop 382 249 a Fi(1)91 b(INTR)l(ODUCTION)2121 b Fk(3)382
548 y Fl(1.2.1)92 b(Function)22 b(parameters)p 387 722
28 4 v 415 722 a Fj(spawnvpe)d Fk(tak)o(es)24 b(the)g(follo)n(wing)h
(ar)n(guments:)518 904 y Fh(\017)46 b Fj(mode)p Fk(\227the)22
b(mode)i(\003ag)f(may)g(be:)718 1089 y Fl(\226)46 b Fj(P)p
869 1089 V 32 w(WAIT)28 b Fk(and)p 1311 1089 V 64 w Fj(P)p
1398 1089 V 32 w(WAIT)p Fk(\227w)o(ait)h(until)i(the)g(child)h(process)
g(has)f(\002nished)g(and)809 1202 y(return)25 b(it')-5
b(s)24 b(return)h(v)n(alue.)718 1346 y Fl(\226)46 b Fj(P)p
869 1346 V 32 w(NOWAIT)p Fk(,)p 1276 1346 V 54 w Fj(P)p
1363 1346 V 32 w(NOWAIT)22 b Fk(and)p 1902 1346 V 58
w Fj(P)p 1990 1346 V 32 w(NOWAITO)p Fk(\227return)h(immediately)j(with)
809 1459 y(the)e(child')-5 b(s)25 b(PID)d(as)i(the)g(return)g(v)n
(alue.)518 1644 y Fh(\017)46 b Fj(filename)p Fk(\227a)28
b(pointer)34 b(to)e(a)f(string)j(containing)h(the)d(name)g(of)g(the)g
(child')-5 b(s)34 b(e)o(x)o(e-)609 1757 y(cutable)25
b(image.)30 b(If)23 b(it)g(is)g(in)h(the)g(P)-8 b(A)e(TH,)20
b(no)k(path)g(information)i(is)d(necessary)-6 b(.)609
1906 y Fj(filename)28 b Fk(must)33 b(be)g(identical)i(to)d
Fj(argv[0])p Fk(,)f(gi)n(ving)j(you)f(the)g(chance)h(for)f(an)609
2019 y(additional)27 b(error)-5 b(.)518 2204 y Fh(\017)46
b Fj(argv)p Fk(\227an)31 b(array)i(of)g(pointers)i(to)d(strings)i
(containing)i(the)d(command)g(line)h(ar)n(gu-)609 2317
y(ments)f(of)g(the)g(called)h(process.)58 b(This)32 b(array)i(shall)f
(be)g(terminated)i(with)d(the)h(null-)609 2430 y(pointer)25
b(constant)h(NULL.)609 2579 y(As)e(a)g(v)o(ery)h(wise)f(decision)j(in)d
(interf)o(ace)j(design)f Fj(argv[0])21 b Fk(has)k(to)f(be)h(the)f(same)
h(as)609 2692 y Fj(filename)p Fk(.)518 2877 y Fh(\017)46
b Fj(envp)p Fk(\227an)28 b(array)i(of)f(pointers)j(to)d(en)l(vironment)
k(v)n(ariables.)48 b(This,)31 b(too,)g(has)f(to)f(be)609
2990 y(terminated)d(with)d(NULL.)609 3139 y Fj(spawnvp)h
Fk(doesn')n(t)30 b(tak)o(e)e(this)h(ar)n(gument\227it)h(just)e(uses)g
(the)g(def)o(ault)i(en)l(vironment)609 3252 y(of)24 b(the)f(caller)-5
b(.)523 3434 y(Y)-10 b(ou')o(ll)24 b(\002nd)f(e)o(xamples)i(of)f(calls)
g(to)p 1688 3434 V 56 w Fj(spawnvpe\(\))18 b Fk(on)24
b(p.)k(9.)382 3682 y Fg(1.3)99 b(Retur)o(n)26 b(v)o(alue)382
3856 y Fl(1.3.1)92 b(Fr)n(om)23 b(synchr)n(onous)p 1409
3856 V 57 w Fj(spawnvpe\(\))382 4030 y Fk(The)j(return)i(v)n(alue)f
(from)g(a)f(synchronous)p 1772 4030 V 63 w Fj(spawnvpe\(\))21
b Fk(\(when)p 2629 4030 V 60 w Fj(P)p 2716 4030 V 32
w(WAIT)j Fk(w)o(as)j(speci-)382 4143 y(\002ed)d(for)g(mode\))h(is)f
(the)g(e)o(xit)h(status)g(of)g(the)f(ne)n(w)g(process.)32
b(Please)25 b(see)g Fj(man)53 b(2)h(waitpid)382 4256
y Fk(for)24 b(details)h(on)e(Unix)h(systems.)382 4451
y Fl(Important:)39 b Fk(GNU-)p Fj(spawnvpe)23 b Fk(is)28
b(identical)i(to)e(the)h(Unix-V)-10 b(ersions)30 b(of)f
Fj(exec)c Fk(and)k(re-)382 4564 y(turns)23 b(the)g(e)o(xit)f(code)h(of)
f(the)h(child)g(process)h(in)e(the)h(lo)n(wer)f(8)g(bits)g(of)g(the)h
(return)g(v)n(alue)h(which)382 4676 y(our)g(v)o(ersion)h(does)f(not.)
382 4921 y Fl(1.3.2)92 b(Fr)n(om)23 b(asynchr)n(onous)p
1455 4921 V 57 w Fj(spawnvpe\(\))382 5095 y Fk(When)p
631 5095 V 60 w Fj(P)p 718 5095 V 32 w(NOWAIT)h Fk(or)p
1206 5095 V 60 w Fj(P)p 1294 5095 V 32 w(NOWAITO)f Fk(are)k
(speci\002ed)i(for)e Fj(mode)d Fk(the)k(return)g(v)n(alue)g(from)p
382 5208 V 409 5208 a Fj(spawnvpe\(\))18 b Fk(is)24 b(the)g(process)h
(id)e(of)h(the)g(child)g(process.)382 5403 y(On)34 b(error)p
742 5403 V 68 w Fj(spawnvpe\(\))29 b Fk(returns)36 b(-1)e(and)h
Fj(errno)c Fk(is)k(set.)61 b(Please)35 b(refer)g(to)f(the)h(man)p
eop
%%Page: 4 4
4 3 bop 382 249 a Fi(2)91 b(THE)22 b(MAIN)g(FILE)f Fj(SPAWNVPE.C)1578
b Fk(4)382 548 y(pages)31 b(of)f(your)h(system)g(for)f(possible)i
(error)f(v)n(alues.)49 b(F)o(or)29 b(asynchronous)34
b Fj(spawn)27 b Fk(you')o(ll)382 661 y(\002nd)34 b(these)i(in)f(the)g
(the)g(documentation)k(to)c Fj(fork\(\))c Fk(for)k(synchronous)k
Fj(spawn)31 b Fk(you')o(ll)382 774 y(ha)n(v)o(e)24 b(to)g(look)g(at)f
Fj(fork\(\))d Fk(and)k Fj(execvp\(\))p Fk(.)382 1066
y Fm(2)119 b(The)30 b(main)g(\002le)h Ff(spawnvpe.c)382
1273 y Fj(WIN32)24 b Fk(is)i(a)h(standard)i(de\002ne)e(in)g(Microsoft')
-5 b(s)29 b(32)e(bit)g(ML.)e(W)-7 b(e)26 b(w)o(on')n(t)i(ha)n(v)o(e)f
(an)o(ything)i(to)382 1386 y(do)24 b(then.)131 1524 y
Fe(4a)181 b Fh(h)p Fd(spawn)l(vpe)o(.c)26 b Fe(4a)p Fh(i)q(\021)465
1637 y Fj(#ifndef)51 b(WIN32)465 1750 y Fh(h)p Fd(The)23
b(include)j(\002les)e(in)f Fj(spawnvpe.c)c Fe(6b)p Fh(i)465
1863 y Fj(int)465 1976 y(_spawnvpe)50 b(\()574 2089 y(int)j(mode,)574
2202 y(const)f(char)h(*filename,)574 2314 y(char)g(*const)f(argv[],)574
2427 y(char)h(*const)f(envp[])f(\))465 2540 y({)574 2653
y(pid_t)h(pid;)574 2766 y Fh(h)p Fd(Assert)24 b(your)o(self)i
Fe(4b)p Fh(i)574 2879 y Fj(pid)53 b(=)h(fork\(\);)574
2992 y(if)g(\(mode)e(==)i(P_WAIT\))574 3105 y({)683 3218
y Fh(h)p Fd(Exec)24 b(and)g(wait)f(for)h(c)o(hild)g(pr)l(ocess)i
Fe(5a)p Fh(i)574 3331 y Fj(})574 3444 y(else)574 3556
y({)683 3669 y Fh(h)p Fd(Exec)e(without)g(waiting)h(for)f(c)o(hild)g
(pr)l(ocess)h Fe(5b)p Fh(i)574 3782 y Fj(})574 3895 y(return)52
b(-1;)465 4008 y(})465 4121 y(#endif)382 4237 y Fe(Uses)p
550 4237 23 4 v 46 w Fc(spawnvpe)17 b Fe(7)i(and)h Fc(P)p
1182 4237 V 26 w(WAIT)e Fe(8.)127 4425 y(4b)181 b Fh(h)p
Fd(Assert)24 b(your)o(self)i Fe(4b)p Fh(i)q(\021)2087
b Fe(\(4a\))465 4538 y Fj(assert)52 b(\(filename)e(!=)k(NULL\);)465
4651 y(assert)e(\(argv)g(!=)i(NULL\);)465 4764 y(assert)e(\(argv[0])f
(!=)i(NULL\);)465 4877 y(assert)f(\(envp)g(!=)i(NULL\);)p
eop
%%Page: 5 5
5 4 bop 382 249 a Fi(2)91 b(THE)22 b(MAIN)g(FILE)f Fj(SPAWNVPE.C)1578
b Fk(5)131 548 y Fe(5a)181 b Fh(h)p Fd(Exec)24 b(and)g(wait)f(for)h(c)o
(hild)g(pr)l(ocess)h Fe(5a)p Fh(i)q(\021)1490 b Fe(\(4a\))465
661 y Fj(int)53 b(status;)465 774 y(if)h(\(pid)e(==)i(0\))465
887 y({)574 1000 y Fh(h)p Fd(Redir)m(ect)25 b(the)f(en)l(vir)l(onment)i
(pointer)f Fe(6a)p Fh(i)574 1112 y Fj(execvp)52 b(\(filename,)e
(argv\);)465 1225 y(})465 1338 y(else)465 1451 y({)574
1564 y(pid)j(=)h(waitpid)e(\(pid,)g(&status,)f(0\);)574
1677 y(if)j(\(pid)e(==)i(-1\))574 1790 y({)683 1903 y(return)e(pid;)574
2016 y(})574 2129 y(if)i(\(WIFEXITED)c(\(status\)\))574
2242 y({)683 2355 y(return)i(\(\(signed)f(char\)WEXITSTAT)o(US)d
(\(status\)\);)574 2467 y(})574 2580 y(else)574 2693
y({)683 2806 y(return)k(0;)574 2919 y(})465 3032 y(})127
3245 y Fe(5b)181 b Fh(h)p Fd(Exec)24 b(without)g(waiting)h(for)f(c)o
(hild)g(pr)l(ocess)h Fe(5b)p Fh(i)q(\021)1233 b Fe(\(4a\))465
3357 y Fj(if)54 b(\(pid)e(==)i(0\))465 3470 y({)574 3583
y Fh(h)p Fd(Redir)m(ect)25 b(the)f(en)l(vir)l(onment)i(pointer)f
Fe(6a)p Fh(i)574 3696 y Fj(execvp)52 b(\(filename,)e(argv\);)465
3809 y(})465 3922 y(else)465 4035 y({)574 4148 y(return)i(pid;)465
4261 y(})p eop
%%Page: 6 6
6 5 bop 382 249 a Fi(3)91 b(THE)22 b(HEADER)e(FILE)i
Fj(NWPROCESS.H)1396 b Fk(6)523 548 y(This)23 b(one)h(is)g(dirty)g(for)g
(tw)o(o)f(reasons:)496 736 y(1.)45 b(One)36 b(must)g(ne)n(v)o(er)h(e)n
(v)o(er)f(cast)h(a)o(w)o(ay)f(a)g Fj(const)p Fk(-speci\002er)-5
b(.)66 b(On)35 b(the)i(other)g(hand)g(a)609 848 y Fj(const)d
Fk(in)k(a)f(prototype)j(in)d(C)f(isn')n(t)j(v)o(ery)f(much)f(more)h
(than)g(a)f(promise)h(not)g(to)609 961 y(change)25 b(the)f(caller')-5
b(s)25 b(pointers\227b)n(ut)i(we)c(don')n(t)i(and)f(the)g(child)g(can')
n(t.)496 1149 y(2.)45 b(I)34 b(don')n(t)h(kno)n(w)f(if)g(it)g(really)h
(w)o(orks)f(e)n(v)o(erywhere.)62 b(I')-5 b(v)o(e)35 b(look)o(ed)h(in)d
(se)n(v)o(eral)j(UNIX)609 1262 y(man)26 b(pages)h(\(Linux,)g(BSD,)c
(Solaris,)k(HPUX\))d(b)n(ut)i(there)h(seems)f(to)g(be)g(no)g(standard)
609 1375 y(method)38 b(to)f(get)h(the)f Fj(PATH)e Fk(for)i
Fj(execvp\(\))p Fk(\227it)c(may)k(in)g(the)h(w)o(orst)f(case)h(only)609
1488 y(search)32 b(`)p Fj(/bin:/usr/bin)p Fk(')24 b(after)31
b(this)g(redirect)h(of)f Fj(environ)p Fk(.)45 b(So)30
b(it)g(may)g(be)609 1601 y(wise)24 b(to)f(include)i(the)f
Fj(PATH)d Fk(in)j Fj(envp)c Fk(before)25 b(the)f(call)g(to)p
2533 1601 28 4 v 56 w Fj(spawnvpe\(\))p Fk(.)609 1751
y(T)-7 b(o)26 b(get)h(the)g(full)g(functionality)j(MS-W)l(indo)n(ws)
2148 1718 y Fb(TM)2279 1751 y Fk(has)d(in)g(this)g(respect,)i(one)e(w)o
(ould)609 1864 y(ha)n(v)o(e)e(to)e(search)j(the)e Fj(PATH)d
Fk(\002rst,)i(store)i(the)f(pathname)i(of)e(the)g(found)h(e)o(x)o
(ecutable)h(in)609 1977 y(a)d(b)n(uf)n(fer)i(and)f(only)g(after)h(that)
f(assign)h Fj(environ)19 b Fk(and)24 b(call)g Fj(execv\(\))p
Fk(.)131 2164 y Fe(6a)181 b Fh(h)p Fd(Redir)m(ect)25
b(the)e(en)l(vir)l(onment)k(pointer)e Fe(6a)p Fh(i)q(\021)1474
b Fe(\(5\))465 2277 y Fj(environ)51 b(=)j(\(char)f(**\))g(envp;)127
2490 y Fe(6b)181 b Fh(h)p Fd(The)23 b(include)j(\002les)e(in)f
Fj(spawnvpe.c)c Fe(6b)p Fh(i)q(\021)1371 b Fe(\(4a\))465
2603 y Fj(#include)51 b(<unistd.h>)465 2716 y(#include)g(<sys/types.h>)
465 2829 y(#include)g(<sys/wait.h>)465 2941 y(#include)g(<assert.h>)465
3054 y(#include)g("nwprocess.h")382 3397 y Fm(3)119 b(The)30
b(header)h(\002le)g Ff(nwprocess.h)382 3604 y Fk(This)18
b(\002le)f(must)h(be)g(included)j(to)d(use)g(our)h(Unix-v)o(ersion)h
(of)p 2281 3604 V 51 w Fj(spawnvpe)p Fk(.)j(On)17 b(Microsoft)3306
3601 y(c)3278 3604 y Fh(\015)382 3717 y Fk(W)l(indo)n(ws)723
3684 y Fb(TM)851 3717 y Fk(systems)25 b(it)e(only)h(includes)i
Fj(process.h)p Fk(.)131 3879 y Fe(6c)181 b Fh(h)p Fd(nwpr)l(ocess.h)26
b Fe(6c)p Fh(i)q(\021)465 3992 y Fj(#ifndef)51 b(NWPROCESS_INCLU)o(DED)
465 4105 y(#define)g(NWPROCESS_INCLU)o(DED)574 4218 y(#ifdef)h(WIN32)
683 4331 y(#include)f(<process.h>)574 4444 y(#else)683
4557 y Fh(h)p Fj(spawnvpe\(\))19 b Fd(pr)l(ototype)26
b(and)e(macr)l(os)g Fe(7)p Fh(i)683 4670 y(h)p Fj(spawnvpe\(\))19
b Fd(constants)26 b Fe(8)p Fh(i)574 4783 y Fj(#endif)465
4896 y(#endif)p eop
%%Page: 7 7
7 6 bop 382 249 a Fi(3)91 b(THE)22 b(HEADER)e(FILE)i
Fj(NWPROCESS.H)1396 b Fk(7)382 548 y Fg(3.1)99 b(Pr)n(ototype)26
b(and)f(macr)n(os)165 722 y Fe(7)180 b Fh(h)p Fj(spawnvpe\(\))18
b Fd(pr)l(ototype)27 b(and)d(macr)l(os)g Fe(7)p Fh(i)q(\021)1308
b Fe(\(6c\))465 835 y Fj(int)53 b(_spawnvpe)e(\()574
948 y(int)i(mode,)574 1061 y(const)f(char)h(*filename,)574
1174 y(char)g(*)h(const)e(argv[],)574 1287 y(char)h(*const)f(envp[])f
(\);)465 1513 y(#define)g(spawnvpe)g(_spawnvpe)465 1625
y(#define)g(_spawnvp\(mode,)d(filename,)j(argvect\))g(\\)574
1738 y(_spawnvpe)f(\(\(mode\),)h(\(filename\),)f(\(argvect\),)g
(environ\);)465 1851 y(#define)h(spawnvp\(mode,)e(filename,)h
(argvect\))h(\\)574 1964 y(_spawnvpe)f(\(\(mode\),)h(\(filename\),)f
(\(argvect\),)g(environ\);)382 2080 y Fe(De\002nes:)p
469 2172 23 4 v 492 2172 a Fc(spawnvp)p Fe(,)17 b(ne)n(v)o(er)j(used.)p
469 2263 V 492 2263 a Fc(spawnvpe)p Fe(,)d(used)i(in)g(chunks)i(4a)e
(and)g(11.)465 2354 y Fc(spawnvp)p Fe(,)e(ne)n(v)o(er)j(used.)465
2446 y Fc(spawnvpe)p Fe(,)d(used)j(in)e(chunk)j(13.)p
eop
%%Page: 8 8
8 7 bop 382 249 a Fi(3)91 b(THE)22 b(HEADER)e(FILE)i
Fj(NWPROCESS.H)1396 b Fk(8)382 548 y Fg(3.2)99 b(Constants)382
722 y Fk(Please)26 b(note)g(that)g(DJGPP)d(de\002nes)j
Fj(P)p 1615 722 28 4 v 33 w(WAIT)d Fk(as)i(1)g(and)h
Fj(P)p 2272 722 V 32 w(NOWAIT)c Fk(as)j(2.)34 b(The)25
b(follo)n(wing)382 835 y(v)n(alues)g(conform)f(to)g(the)g(Microsoft)
1576 832 y(c)1549 835 y Fh(\015)h Fj(process.h)p Fk(.)165
973 y Fe(8)180 b Fh(h)p Fj(spawnvpe\(\))18 b Fd(constants)27
b Fe(8)p Fh(i\021)1755 b Fe(\(6c\))465 1086 y Fj(#ifndef)51
b(_P_WAIT)574 1199 y(#define)g(_P_WAIT)h(0)465 1312 y(#endif)465
1425 y(#ifndef)f(P_WAIT)574 1537 y(#define)g(P_WAIT)h(_P_WAIT)465
1650 y(#endif)465 1876 y(#ifndef)f(_P_NOWAIT)574 1989
y(#define)g(_P_NOWAIT)g(1)465 2102 y(#endif)465 2215
y(#ifndef)g(P_NOWAIT)574 2328 y(#define)g(P_NOWAIT)g(_P_NOWAIT)465
2441 y(#endif)465 2667 y(#ifndef)g(_P_NOWAITO)574 2780
y(#define)g(_P_NOWAITO)f(3)465 2892 y(#endif)382 3009
y Fe(De\002nes:)p 469 3100 23 4 v 492 3100 a Fc(P)p 541
3100 V 27 w(NOWAIT)p Fe(,)17 b(ne)n(v)o(er)j(used.)p
469 3191 V 492 3191 a Fc(P)p 541 3191 V 27 w(NOWAITO)p
Fe(,)d(used)i(in)g(chunk)h(9.)p 469 3283 V 492 3283 a
Fc(P)p 541 3283 V 27 w(WAIT)p Fe(,)d(used)j(in)f(chunk)h(9.)465
3374 y Fc(P)p 514 3374 V 27 w(NOWAIT)p Fe(,)d(used)j(in)e(chunk)j(9.)
465 3465 y Fc(P)p 514 3465 V 27 w(WAIT)p Fe(,)c(used)j(in)f(chunks)h
(4a,)f(9,)g(and)g(11.)p eop
%%Page: 9 9
9 8 bop 382 249 a Fi(4)91 b(A)23 b(SMALL)d(TEST)h(SUITE)1889
b Fk(9)382 548 y Fm(4)119 b(A)30 b(small)g(test)f(suite)382
755 y Fk(This)e(`test)g(suite')i(requires)g(GNU)c(GCC.)f(Basically)29
b(one)e(should)i(write)e(a)g(test)g(routine)i(for)382
868 y(e)n(v)o(ery)37 b(piece)h(of)f(code.)70 b(This)37
b(one)g(may)g(also)g(serv)o(e)h(as)f(an)g(e)o(xample)g(for)h(the)f
(usage)h(of)382 981 y Fj(spawnvpe\(\))p Fk(.)382 1230
y Fg(4.1)99 b Fa(spawntest.exe)165 1404 y Fe(9)180 b
Fh(h)p Fd(spawntest.c)26 b Fe(9)p Fh(i\021)465 1517 y
Fj(#include)51 b(<stdlib.h>)465 1630 y(#include)g(<stdio.h>)465
1743 y(#include)g("nwprocess.h")465 1969 y(int)465 2082
y(main)i(\(void\))465 2195 y({)574 2308 y(char)g(*environment[])48
b(=)54 b({)683 2420 y("THIS=is",)683 2533 y("THE=environmen)o(t")o(,)
683 2646 y("TO=be",)683 2759 y("PASSED=to",)683 2872
y("THE=child",)683 2985 y("PROCESS=end",)683 3098 y(NULL)574
3211 y(};)574 3324 y(char)f(*argvector[])c(=)54 b({)683
3437 y("spawnchild.exe)o(",)683 3550 y("First)e(Parameter",)683
3662 y("Second)f(Parameter",)683 3775 y("Third)h(Parameter",)683
3888 y(NULL)574 4001 y(};)574 4114 y(int)h(retval;)574
4227 y(int)g(wait_mode;)574 4340 y(char)g(*program_name;)574
4566 y(program_name)c(=)54 b("spawnchild.exe)o(";)574
4792 y(wait_mode)c(=)55 b(P_NOWAIT;)574 4904 y Fh(h)p
Fd(Spawn)25 b(a)e(c)o(hild)h(pr)l(ocess)h(and)f(display)i(the)e(r)m
(esults)g Fe(11)p Fh(i)574 5017 y Fj(wait_mode)50 b(=)55
b(P_WAIT;)574 5130 y Fh(h)p Fd(Spawn)25 b(a)e(c)o(hild)h(pr)l(ocess)h
(and)f(display)i(the)e(r)m(esults)g Fe(11)p Fh(i)574
5356 y Fj(program_name)49 b(=)54 b("ls";)p eop
%%Page: 10 10
10 9 bop 382 249 a Fi(4)91 b(A)23 b(SMALL)d(TEST)h(SUITE)1844
b Fk(10)574 548 y Fj(argvector[0])49 b(=)54 b(program_name;)574
661 y(argvector[1])49 b(=)54 b("-Flias";)574 774 y(argvector[2])49
b(=)54 b(NULL;)574 1000 y(wait_mode)c(=)55 b(_P_NOWAITO;)574
1112 y Fh(h)p Fd(Spawn)25 b(a)e(c)o(hild)h(pr)l(ocess)h(and)f(display)i
(the)e(r)m(esults)g Fe(11)p Fh(i)574 1225 y Fj(wait_mode)50
b(=)55 b(P_WAIT;)574 1338 y Fh(h)p Fd(Spawn)25 b(a)e(c)o(hild)h(pr)l
(ocess)h(and)f(display)i(the)e(r)m(esults)g Fe(11)p Fh(i)574
1564 y Fj(program_name)49 b(=)54 b("program_with_a)o(_s)o(ill)o(y_)o
(na)o(me)o(";)574 1677 y(argvector[0])49 b(=)54 b(program_name;)574
1790 y(argvector[1])49 b(=)54 b(NULL;)574 2016 y(wait_mode)c(=)55
b(_P_WAIT;)574 2129 y Fh(h)p Fd(Spawn)25 b(a)e(c)o(hild)h(pr)l(ocess)h
(and)f(display)i(the)e(r)m(esults)g Fe(11)p Fh(i)574
2355 y Fj(program_name)49 b(=)54 b("sh";)683 2467 y(argvector[0])49
b(=)54 b(program_name;)683 2580 y(argvector[1])49 b(=)54
b("-c";)683 2693 y(argvector[2])49 b(=)54 b("set";)683
2806 y(argvector[3])49 b(=)54 b(NULL;)683 3032 y(wait_mode)d(=)j
(_P_WAIT;)683 3145 y Fh(h)p Fd(Spawn)25 b(a)e(c)o(hild)h(pr)l(ocess)h
(and)f(display)i(the)e(r)m(esults)g Fe(11)p Fh(i)574
3371 y Fj(return)52 b(EXIT_SUCCESS;)465 3484 y(})382
3600 y Fe(De\002nes:)465 3691 y Fc(main)p Fe(,)18 b(ne)n(v)o(er)h
(used.)382 3782 y(Uses)p 550 3782 23 4 v 46 w Fc(P)p
622 3782 V 26 w(NOWAITO)f Fe(8,)p 1056 3782 V 46 w Fc(P)p
1128 3782 V 26 w(WAIT)g Fe(8,)h Fc(P)p 1472 3782 V 27
w(NOWAIT)e Fe(8,)i(and)h Fc(P)p 2033 3782 V 26 w(WAIT)e
Fe(8.)p eop
%%Page: 11 11
11 10 bop 382 249 a Fi(4)91 b(A)23 b(SMALL)d(TEST)h(SUITE)1844
b Fk(11)127 548 y Fe(11)181 b Fh(h)p Fd(Spawn)24 b(a)g(c)o(hild)g(pr)l
(ocess)h(and)f(display)i(the)d(r)m(esults)i Fe(11)p Fh(i)q(\021)1013
b Fe(\(9\))465 661 y Fj(printf)52 b(\()574 774 y("Spawning)e(\045s)k
(in)g(mode)e(_P_\045sWAIT:\\n",)574 887 y(program_name,)574
1000 y(wait_mode)e(==)k(P_WAIT)e(?)i("")g(:)g("NO")e(\);)465
1112 y(retval)g(=)i(_spawnvpe)c(\()574 1225 y(wait_mode,)574
1338 y(program_name,)574 1451 y(argvector,)574 1564 y(environment\);)
465 1677 y(printf)i(\("The)g(return)g(value)g(was)h(\045d.\\n",)574
1790 y(retval\);)465 1903 y(if)h(\(retval)d(==)j(-1\))465
2016 y({)574 2129 y(printf)e(\()683 2242 y("errno)g(=)i(\045d:)f
(\045s.\\n",)683 2355 y(errno,)683 2467 y(strerror)e(\(errno\)\);)465
2580 y(})382 2697 y Fe(Uses)p 550 2697 23 4 v 46 w Fc(spawnvpe)17
b Fe(7)i(and)h Fc(P)p 1182 2697 V 26 w(WAIT)e Fe(8.)p
eop
%%Page: 12 12
12 11 bop 382 249 a Fi(4)91 b(A)23 b(SMALL)d(TEST)h(SUITE)1844
b Fk(12)382 548 y Fg(4.2)99 b Fa(spawnchild.exe)382 722
y Fk(Note)34 b(that)g(the)h(de\002nition)g(of)f Fj(main\(\))d
Fk(in)j(this)g(program)h(is)f(not)h(ISO-C)d(and)j(is)f(depre-)382
835 y(cated)28 b(e)n(v)o(en)e(on)h(systems)h(where)f(it)f(is)g(a)n(v)n
(ailable.)41 b(It)26 b(ne)n(v)o(ertheless)j(is)e(a)f(nice)h(test)g(to)g
(see,)g(if)382 948 y Fj(environ)51 b(=)j(envp)21 b Fk(before)k(the)f
(call)g(to)f Fj(execvp\(\))d Fk(really)k(w)o(orks.)94
1086 y Fe(12a)181 b Fh(h)p Fd(spawnc)o(hild.c)26 b Fe(12a)p
Fh(i)q(\021)465 1199 y Fj(#include)51 b(<stdlib.h>)465
1312 y(#include)g(<stdio.h>)465 1425 y(#ifndef)g(WIN32)574
1537 y(#include)g(<unistd.h>)465 1650 y(#else)574 1763
y(#define)g(sleep\(x\))g(\(void\)0)465 1876 y(#endif)465
2102 y(int)465 2215 y(main)i(\(int)f(argc,)h(char)f(*argv[],)f(char)i
(*envp[]\))465 2328 y({)574 2441 y(sleep)f(\(1\);)574
2554 y(puts)h(\("Environment)48 b(in)54 b(spawnchild.exe:)o("\))o(;)574
2667 y Fh(h)p Fd(Print)24 b(the)g(pr)l(ocess)h(en)l(vir)l(onment)i
Fe(12c)p Fh(i)574 2780 y Fj(puts)53 b(\("\\nParameters)48
b(in)54 b(spawnchild.exe)o(:")o(\);)574 2892 y Fh(h)p
Fd(Print)24 b(the)g(pr)l(ocess)h(par)o(ameter)o(s)h Fe(12b)p
Fh(i)574 3005 y Fj(puts)53 b(\("\\nVariable)c(\\"THIS\\")i(in)i
(spwanchild:"\);)574 3118 y(printf)f(\("\045s\\n",)f(getenv)h
(\("THIS"\)\);)574 3231 y(return)g(EXIT_SUCCESS;)465
3344 y(})382 3460 y Fe(De\002nes:)465 3552 y Fc(main)p
Fe(,)18 b(ne)n(v)o(er)h(used.)90 3739 y(12b)181 b Fh(h)p
Fd(Print)24 b(the)g(pr)l(ocess)h(par)o(ameter)o(s)h Fe(12b)p
Fh(i)q(\021)1503 b Fe(\(12a\))465 3852 y Fj(while)52
b(\(*argv\))465 3965 y({)574 4078 y(printf)g(\()i("\045s\\n",)d
(*argv\);)574 4191 y(argv++;)465 4304 y(})94 4516 y Fe(12c)181
b Fh(h)p Fd(Print)24 b(the)g(pr)l(ocess)h(en)l(vir)l(onment)i
Fe(12c)p Fh(i)q(\021)1472 b Fe(\(12a\))465 4629 y Fj(while)52
b(\(*envp\))465 4742 y({)574 4855 y(printf)g(\()i("\045s\\n",)d
(*envp\);)574 4968 y(envp++;)465 5081 y(})p eop
%%Page: 13 13
13 12 bop 382 249 a Fi(5)91 b(INDEX)2478 b Fk(13)127
548 y Fe(13)181 b Fh(h)p Fd(spawntest.mak)26 b Fe(13)p
Fh(i)q(\021)465 661 y Fj(CC=gcc)52 b(-Wall)g(-pedantic)465
887 y(all:)574 1000 y(${CC})g(-o)i(spawntest.exe)49 b(spawnvpe.c)h
(spawntest.c)574 1112 y(${CC})i(-o)i(spawnchild.exe)48
b(spawnchild.c)574 1225 y(./spawntest.exe)382 1567 y
Fe(Uses)19 b Fc(spawnvpe)e Fe(7.)382 1910 y Fm(5)119
b(Index)382 2120 y Fg(5.1)99 b(Chunks)382 2319 y Fh(h)p
Fj(spawnvpe\(\))18 b Fd(constants)27 b Fe(8)p Fh(i)382
2432 y(h)p Fj(spawnvpe\(\))18 b Fd(pr)l(ototype)27 b(and)d(macr)l(os)g
Fe(7)p Fh(i)382 2545 y(h)p Fd(Assert)g(your)o(self)i
Fe(4b)p Fh(i)382 2658 y(h)p Fd(Exec)e(and)g(wait)f(for)h(c)o(hild)g(pr)
l(ocess)h Fe(5a)p Fh(i)382 2771 y(h)p Fd(Exec)f(without)g(waiting)h
(for)f(c)o(hild)g(pr)l(ocess)h Fe(5b)p Fh(i)382 2884
y(h)p Fd(nwpr)l(ocess.h)h Fe(6c)p Fh(i)382 2997 y(h)p
Fd(Print)e(the)g(pr)l(ocess)h(en)l(vir)l(onment)i Fe(12c)p
Fh(i)382 3110 y(h)p Fd(Print)d(the)g(pr)l(ocess)h(par)o(ameter)o(s)h
Fe(12b)p Fh(i)382 3223 y(h)p Fd(Redir)m(ect)f(the)e(en)l(vir)l(onment)k
(pointer)e Fe(6a)p Fh(i)382 3336 y(h)p Fd(Spawn)f(a)g(c)o(hild)g(pr)l
(ocess)h(and)f(display)i(the)d(r)m(esults)i Fe(11)p Fh(i)382
3448 y(h)p Fd(spawnc)o(hild.c)h Fe(12a)p Fh(i)382 3561
y(h)p Fd(spawntest.c)g Fe(9)p Fh(i)382 3674 y(h)p Fd(spawntest.mak)g
Fe(13)p Fh(i)382 3787 y(h)p Fd(spawn)l(vpe)o(.c)g Fe(4a)p
Fh(i)382 3900 y(h)p Fd(The)d(include)j(\002les)e(in)f
Fj(spawnvpe.c)c Fe(6b)p Fh(i)382 4149 y Fg(5.2)99 b(Identi\002ers)p
387 4324 28 4 v 415 4324 a Fj(P)p 475 4324 V 32 w(NOWAIT)p
Fk(:)43 b(8)p 900 4339 46 4 v 387 4436 28 4 v 415 4436
a Fj(P)p 475 4436 V 32 w(NOWAITO)p Fk(:)f(8)p 954 4451
46 4 v 1 w(,)22 b(9)p 387 4549 28 4 v 415 4549 a Fj(P)p
475 4549 V 32 w(WAIT)p Fk(:)44 b(8)p 791 4564 46 4 v(,)23
b(9)p 387 4662 28 4 v 415 4662 a Fj(spawnvp)p Fk(:)53
b(7)p 878 4676 46 4 v 387 4775 28 4 v 415 4775 a Fj(spawnvpe)p
Fk(:)g(4a,)23 b(7)p 1064 4789 46 4 v(,)g(11)382 4888
y Fj(main)p Fk(:)55 b(9)p 682 4903 V(,)23 b(12a)p 773
4902 132 4 v 382 5001 a Fj(P)p 442 5001 28 4 v 32 w(NOWAIT)p
Fk(:)43 b(8)p 867 5016 46 4 v 1 w(,)22 b(9)382 5114 y
Fj(P)p 442 5114 28 4 v 32 w(WAIT)p Fk(:)44 b(4a,)23 b(8)p
889 5129 46 4 v 1 w(,)f(9,)h(11)382 5227 y Fj(spawnvp)p
Fk(:)53 b(7)p 845 5241 V 382 5340 a Fj(spawnvpe)p Fk(:)g(7)p
900 5354 V(,)23 b(13)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
